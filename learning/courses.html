<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Islamic Courses | DeenLink</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../theme/theme.css">
    <script src="../theme/theme.js" defer></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        :root {
            --primary-green: #1D6F42;
            --light-green: #E8F5E9;
            --accent-gold: #D4AF37;
            --white: #FFFFFF;
            --light-gray: #F5F5F5;
            --medium-gray: #E0E0E0;
            --dark-gray: #757575;
            --text-dark: #333333;
            --tafsir-blue: #1A5F7A;
            --fiqh-teal: #00695C;
            --aqeedah-purple: #6A1B9A;
            --arabic-orange: #E65100;
            --seerah-red: #C62828;
            --arabic-grammar: #283593;
        }

        /* Dark Theme Variables */
        .dark-theme {
            --primary-green: #2ecc71;
            --light-green: #1a2526;
            --accent-gold: #f39c12;
            --white: #2c3e50;
            --light-gray: #34495e;
            --medium-gray: #4a6572;
            --dark-gray: #bdc3c7;
            --text-dark: #ecf0f1;
            --tafsir-blue: #3498db;
            --fiqh-teal: #1abc9c;
            --aqeedah-purple: #9b59b6;
            --arabic-orange: #e67e22;
            --seerah-red: #e74c3c;
            --arabic-grammar: #5c6bc0;
        }

        body {
            background-color: var(--light-gray);
            color: var(--text-dark);
            max-width: 100%;
            margin: 0 auto;
            position: relative;
            min-height: 100vh;
            overflow-x: hidden;
            transition: background-color 0.3s, color 0.3s;
        }

        /* Page Loader Overlay */
        #pageLoader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 9999;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        #pageLoader.active {
            display: flex;
            opacity: 1;
        }

        /* Islamic Loader */
        .islamic-loader {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 20px;
            text-align: center;
        }

        .loader-crescent {
            width: 80px;
            height: 80px;
            position: relative;
        }

        .crescent {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary-green), var(--accent-gold));
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            animation: crescentFloat 3s ease-in-out infinite;
        }

        .crescent::before {
            content: '';
            position: absolute;
            top: 10px;
            right: 10px;
            width: 60px;
            height: 60px;
            background-color: rgba(0, 0, 0, 0.95);
            border-radius: 50%;
        }

        .loader-star {
            position: absolute;
            top: 20px;
            left: 20px;
            color: var(--accent-gold);
            font-size: 24px;
            animation: starTwinkle 2s ease-in-out infinite;
        }

        .loader-text {
            color: white;
            font-size: 18px;
            font-weight: 500;
            letter-spacing: 1px;
            animation: textPulse 2s ease-in-out infinite;
        }

        @keyframes crescentFloat {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            50% {
                transform: translateY(-10px) rotate(5deg);
            }
        }

        @keyframes starTwinkle {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.6;
                transform: scale(0.9);
            }
        }

        @keyframes textPulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }

        /* Page Transition Overlay */
        .page-transition-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .page-transition-overlay.active {
            display: flex;
            opacity: 1;
        }

        /* Container */
        .container {
            max-width: 480px;
            margin: 0 auto;
            position: relative;
        }

        @media (min-width: 768px) {
            .container {
                max-width: 100%;
            }
        }

        /* Top Section */
        .top-section {
            height: 200px;
            position: relative;
            overflow: hidden;
            border-radius: 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        .top-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(29, 111, 66, 0.95) 0%, rgba(26, 95, 122, 0.9) 100%);
            z-index: 1;
        }

        .dark-theme .top-section::before {
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.95) 0%, rgba(52, 152, 219, 0.9) 100%);
        }

        .top-section-background {
            width: 100%;
            height: 100%;
            background-image: url('https://images.unsplash.com/photo-1544717305-2782549b5136?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1600&q=80');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0.7;
        }

        .top-bar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            z-index: 10;
        }

        @media (min-width: 768px) {
            .top-bar {
                padding: 20px 30px;
            }
        }

        .page-title {
            color: white;
            font-size: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .page-title i {
            font-size: 22px;
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
            z-index: 20;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 14px;
            cursor: pointer;
            padding: 6px 12px;
            border-radius: 20px;
            transition: background-color 0.3s;
            backdrop-filter: blur(5px);
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .theme-toggle i {
            font-size: 16px;
        }

        .page-subtitle {
            position: absolute;
            bottom: 40px;
            left: 0;
            right: 0;
            text-align: center;
            color: white;
            padding: 0 20px;
            z-index: 2;
        }

        .page-subtitle h1 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .page-subtitle p {
            font-size: 14px;
            opacity: 0.9;
            max-width: 400px;
            margin: 0 auto;
            line-height: 1.5;
        }

        /* Courses Container */
        .courses-container {
            padding: 20px 16px 100px;
        }

        @media (min-width: 768px) {
            .courses-container {
                padding: 25px 30px 120px;
                max-width: 1000px;
                margin: 0 auto;
            }
        }

        /* Search and Filter Section */
        .search-filter-section {
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        @media (min-width: 768px) {
            .search-filter-section {
                flex-direction: row;
                align-items: center;
                justify-content: space-between;
            }
        }

        .search-box {
            display: flex;
            align-items: center;
            background-color: var(--white);
            border-radius: 30px;
            padding: 8px 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .search-box i {
            color: var(--dark-gray);
            font-size: 14px;
            margin-right: 8px;
        }

        .search-input {
            border: none;
            background: transparent;
            font-size: 14px;
            color: var(--text-dark);
            outline: none;
            width: 100%;
        }

        .search-input::placeholder {
            color: var(--dark-gray);
        }

        .sort-options {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }

        .sort-label {
            color: var(--dark-gray);
        }

        .sort-select {
            background-color: var(--white);
            border: 1px solid var(--medium-gray);
            border-radius: 20px;
            padding: 6px 12px;
            font-size: 13px;
            color: var(--text-dark);
            cursor: pointer;
            outline: none;
        }

        /* Categories Filter */
        .categories-filter {
            margin-bottom: 20px;
            width: 100%;
            overflow-x: auto;
            display: flex;
            gap: 10px;
            padding: 5px 0 10px;
            scrollbar-width: thin;
            scrollbar-color: var(--medium-gray) transparent;
        }

        .categories-filter::-webkit-scrollbar {
            height: 4px;
        }

        .categories-filter::-webkit-scrollbar-track {
            background: transparent;
        }

        .categories-filter::-webkit-scrollbar-thumb {
            background-color: var(--medium-gray);
            border-radius: 10px;
        }

        .category-btn {
            background-color: var(--white);
            border: 1px solid var(--medium-gray);
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 13px;
            font-weight: 500;
            color: var(--dark-gray);
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .category-btn:hover {
            background-color: var(--light-green);
            color: var(--primary-green);
        }

        .category-btn.active {
            background-color: var(--primary-green);
            color: white;
            border-color: var(--primary-green);
        }

        .dark-theme .category-btn {
            background-color: var(--white);
            color: var(--text-dark);
        }

        .dark-theme .category-btn.active {
            background-color: var(--primary-green);
            color: var(--white);
        }

        .dark-theme .category-btn:hover {
            background-color: var(--light-green);
            color: var(--primary-green);
        }

        /* Courses Grid */
        .courses-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
        }

        @media (min-width: 768px) {
            .courses-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .courses-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Course Card - Article Style */
        .course-card {
            background-color: var(--white);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transition: all 0.3s;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: flex;
            flex-direction: column;
            height: 100%;
            position: relative;
        }

        .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .dark-theme .course-card:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.25);
        }

        .course-image {
            width: 100%;
            height: 160px;
            object-fit: cover;
            display: block;
        }

        .course-content {
            padding: 16px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .course-category {
            display: inline-block;
            font-size: 11px;
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 12px;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .course-category.tafsir {
            background-color: rgba(26, 95, 122, 0.1);
            color: var(--tafsir-blue);
        }

        .course-category.fiqh {
            background-color: rgba(0, 105, 92, 0.1);
            color: var(--fiqh-teal);
        }

        .course-category.aqeedah {
            background-color: rgba(106, 27, 154, 0.1);
            color: var(--aqeedah-purple);
        }

        .course-category.arabic {
            background-color: rgba(230, 81, 0, 0.1);
            color: var(--arabic-orange);
        }

        .course-category.seerah {
            background-color: rgba(198, 40, 40, 0.1);
            color: var(--seerah-red);
        }

        .course-category.arabic-grammar {
            background-color: rgba(40, 53, 147, 0.1);
            color: var(--arabic-grammar);
        }

        .course-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 10px;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .course-description {
            font-size: 13px;
            color: var(--dark-gray);
            line-height: 1.5;
            margin-bottom: 15px;
            flex-grow: 1;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .course-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 11px;
            color: var(--dark-gray);
            border-top: 1px solid var(--medium-gray);
            padding-top: 12px;
            margin-top: auto;
        }

        .course-instructor {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .course-instructor i {
            font-size: 12px;
            color: var(--primary-green);
        }

        .course-stats {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .stat-item i {
            font-size: 12px;
            color: var(--primary-green);
        }

        /* Progress Indicator */
        .progress-indicator {
            margin: 10px 0;
            display: none;
        }

        .progress-indicator.enrolled {
            display: block;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: var(--dark-gray);
            margin-bottom: 5px;
        }

        .progress-bar {
            height: 6px;
            background-color: var(--light-gray);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--primary-green);
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        /* Featured Course */
        .featured-course {
            grid-column: 1 / -1;
            margin-bottom: 10px;
        }

        .featured-course .course-image {
            height: 200px;
        }

        .featured-course .course-title {
            font-size: 18px;
        }

        @media (min-width: 768px) {
            .featured-course {
                display: flex;
            }
            
            .featured-course .course-image {
                width: 40%;
                height: auto;
            }
            
            .featured-course .course-content {
                width: 60%;
            }
        }

        /* Empty State */
        .empty-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 60px 20px;
            color: var(--dark-gray);
        }

        .empty-state i {
            font-size: 48px;
            margin-bottom: 15px;
            display: block;
            color: var(--medium-gray);
        }

        .empty-state h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-dark);
        }

        .empty-state p {
            font-size: 14px;
            line-height: 1.5;
            max-width: 400px;
            margin: 0 auto;
        }

        /* Info Box */
        .info-box {
            margin-top: 25px;
            padding: 16px;
            background-color: rgba(29, 111, 66, 0.1);
            border-radius: 12px;
            border-left: 4px solid var(--primary-green);
        }

        .dark-theme .info-box {
            background-color: rgba(46, 204, 113, 0.1);
        }

        .info-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 600;
            color: var(--primary-green);
            margin-bottom: 8px;
        }

        .info-text {
            font-size: 13px;
            color: var(--text-dark);
            line-height: 1.5;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            max-width: 100%;
            margin: 0 auto;
            display: flex;
            background-color: var(--white);
            box-shadow: 0 -4px 16px rgba(0, 0, 0, 0.08);
            padding: 12px 0;
            z-index: 100;
            border-radius: 0;
        }

        @media (min-width: 768px) {
            .bottom-nav {
                max-width: 768px;
                left: 50%;
                transform: translateX(-50%);
                border-radius: 20px 20px 0 0;
                margin-bottom: 10px;
            }
        }

        @media (min-width: 1024px) {
            .bottom-nav {
                max-width: 480px;
            }
        }

        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--dark-gray);
            text-decoration: none;
            transition: color 0.3s;
            cursor: pointer;
            padding: 5px 0;
            position: relative;
        }

        .nav-item:hover {
            color: var(--primary-green);
        }

        .nav-item.active {
            color: var(--primary-green);
        }

        .nav-item i {
            font-size: 18px;
            margin-bottom: 4px;
        }

        .nav-label {
            font-size: 10px;
            font-weight: 500;
            text-align: center;
            line-height: 1.1;
        }

        /* Nav Loader */
        .nav-loader {
            position: absolute;
            top: -2px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            background-color: var(--primary-green);
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .nav-item.loading .nav-loader {
            opacity: 1;
            animation: pulseLoader 1s infinite;
        }

        @keyframes pulseLoader {
            0%, 100% {
                transform: translateX(-50%) scale(1);
                opacity: 1;
            }
            50% {
                transform: translateX(-50%) scale(1.5);
                opacity: 0.7;
            }
        }

        /* Page fade-in animation */
        @keyframes pageFadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .page-content {
            animation: pageFadeIn 0.5s ease-out;
        }

        /* Course Details Modal */
        .course-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .course-modal.active {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background-color: var(--white);
            border-radius: 20px;
            width: 100%;
            max-width: 500px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            transform: translateY(30px);
            opacity: 0;
            transition: transform 0.4s ease, opacity 0.4s ease;
        }

        .course-modal.active .modal-content {
            transform: translateY(0);
            opacity: 1;
        }

        .modal-header {
            padding: 20px;
            color: white;
            border-radius: 20px 20px 0 0;
            position: relative;
            background: linear-gradient(135deg, var(--primary-green), var(--tafsir-blue));
        }

        .modal-header.tafsir {
            background: linear-gradient(135deg, var(--tafsir-blue), #2196F3);
        }

        .modal-header.fiqh {
            background: linear-gradient(135deg, var(--fiqh-teal), #00BFA5);
        }

        .modal-header.aqeedah {
            background: linear-gradient(135deg, var(--aqeedah-purple), #9C27B0);
        }

        .modal-header.arabic {
            background: linear-gradient(135deg, var(--arabic-orange), #FF9800);
        }

        .modal-header.seerah {
            background: linear-gradient(135deg, var(--seerah-red), #F44336);
        }

        .modal-header.arabic-grammar {
            background: linear-gradient(135deg, var(--arabic-grammar), #3F51B5);
        }

        .modal-category {
            display: inline-block;
            padding: 5px 15px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            color: white;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            backdrop-filter: blur(5px);
        }

        .close-modal:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 20px;
        }

        .description-section {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--medium-gray);
        }

        .section-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 600;
            color: var(--primary-green);
            margin-bottom: 10px;
        }

        .section-label i {
            font-size: 16px;
        }

        .description-text {
            font-size: 15px;
            line-height: 1.6;
            color: var(--text-dark);
            padding-left: 10px;
            border-left: 3px solid var(--medium-gray);
        }

        .details-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .detail-box {
            background-color: var(--light-gray);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .detail-box:hover {
            transform: translateY(-3px);
            background-color: rgba(29, 111, 66, 0.1);
        }

        .detail-box i {
            font-size: 20px;
            color: var(--primary-green);
            margin-bottom: 8px;
        }

        .detail-label {
            font-size: 11px;
            color: var(--dark-gray);
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detail-value {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .progress-section {
            margin-bottom: 25px;
        }

        .progress-section .progress-label {
            font-size: 14px;
            margin-bottom: 10px;
        }

        .progress-section .progress-bar {
            height: 10px;
        }

        .certificate-section {
            background-color: rgba(29, 111, 66, 0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 25px;
            border-left: 4px solid var(--primary-green);
        }

        .certificate-text {
            font-size: 13px;
            color: var(--text-dark);
            line-height: 1.5;
        }

        .certificate-text strong {
            color: var(--primary-green);
        }

        .modal-actions {
            display: flex;
            gap: 12px;
        }

        .modal-actions .action-btn {
            flex: 1;
            padding: 14px 0;
            font-size: 14px;
            font-weight: 600;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .modal-actions .action-btn.primary {
            background-color: var(--primary-green);
            color: white;
        }

        .modal-actions .action-btn.primary:hover {
            background-color: rgba(29, 111, 66, 0.9);
            transform: translateY(-2px);
        }

        .modal-actions .action-btn.secondary {
            background-color: var(--light-gray);
            color: var(--text-dark);
        }

        .modal-actions .action-btn.secondary:hover {
            background-color: var(--medium-gray);
            transform: translateY(-2px);
        }

        /* Loading animation for modal */
        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-content {
            animation: modalFadeIn 0.4s ease-out;
        }

        /* Responsive Design */
        @media (max-width: 480px) {
            .modal-actions {
                flex-direction: column;
            }
            
            .course-title {
                font-size: 15px;
            }
            
            .course-description {
                font-size: 12px;
            }
            
            .course-image {
                height: 140px;
            }
            
            .bottom-nav {
                border-radius: 0;
            }
        }

        @media (min-width: 768px) and (max-width: 1023px) {
            .courses-container {
                max-width: 700px;
            }
            
            .course-title {
                font-size: 16px;
            }
        }
    </style>
</head>
<body class="light-theme">
    <!-- Page Loader Overlay -->
    <div id="pageLoader">
        <div class="islamic-loader">
            <div class="loader-crescent">
                <div class="crescent"></div>
                <div class="loader-star">
                    <i class="fas fa-star"></i>
                </div>
            </div>
            <div class="loader-text">Loading...</div>
        </div>
    </div>

    <!-- Page Transition Overlay with Islamic Loader -->
    <div class="page-transition-overlay" id="pageTransitionOverlay">
        <div class="islamic-loader">
            <div class="loader-crescent">
                <div class="crescent"></div>
                <div class="loader-star">
                    <i class="fas fa-star"></i>
                </div>
            </div>
            <div class="loader-text">Loading...</div>
        </div>
    </div>

    <div class="container">
        <div class="page-content" id="pageContent">
            <!-- Top Section -->
            <section class="top-section">
                <div class="top-section-background"></div>
                
                <div class="top-bar">
                    <button class="back-btn" id="backBtn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <div class="page-title">
                        <i class="fas fa-book-open"></i>
                        <span>Islamic Courses</span>
                    </div>
                    <button class="theme-toggle" id="themeToggle">
                        <i class="fas fa-moon"></i>
                        <span>Dark</span>
                    </button>
                </div>
                
                <div class="page-subtitle">
                    <h1>Structured Learning</h1>
                    <p>Comprehensive courses on Islamic sciences taught by qualified scholars</p>
                </div>
            </section>

            <!-- Courses Content -->
            <div class="courses-container">
                <!-- Search and Filter Section -->
                <div class="search-filter-section">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" class="search-input" id="searchInput" placeholder="Search courses...">
                    </div>
                    <div class="sort-options">
                        <span class="sort-label">Sort by:</span>
                        <select class="sort-select" id="sortSelect">
                            <option value="recent">Most Recent</option>
                            <option value="popular">Most Popular</option>
                            <option value="duration">Duration</option>
                            <option value="enrolled">My Courses</option>
                        </select>
                    </div>
                </div>

                <!-- Categories Filter -->
                <div class="categories-filter">
                    <button class="category-btn active" data-category="all">All Courses</button>
                    <button class="category-btn" data-category="tafsir">Tafsir</button>
                    <button class="category-btn" data-category="fiqh">Fiqh</button>
                    <button class="category-btn" data-category="aqeedah">Aqeedah</button>
                    <button class="category-btn" data-category="arabic">Arabic</button>
                    <button class="category-btn" data-category="seerah">Seerah</button>
                </div>

                <!-- Courses Grid -->
                <div class="courses-grid" id="coursesGrid">
                    <!-- Featured Course -->
                    <div class="course-card featured-course" data-id="1">
                        <img src="https://images.unsplash.com/photo-1544717305-2782549b5136?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" alt="Quran Tafsir" class="course-image">
                        <div class="course-content">
                            <span class="course-category tafsir">Tafsir</span>
                            <h3 class="course-title">Quran Tafsir: Surah Al-Fatiha & Al-Baqarah</h3>
                            <div class="course-description">In-depth explanation of the first two chapters of the Quran with classical and contemporary commentaries from Ibn Kathir, Al-Qurtubi, and As-Sa'di.</div>
                            <div class="course-meta">
                                <div class="course-instructor">
                                    <i class="fas fa-user-tie"></i>
                                    <span>Dr. Omar Suleiman</span>
                                </div>
                                <div class="course-stats">
                                    <div class="stat-item">
                                        <i class="far fa-clock"></i>
                                        <span>12 hours</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="fas fa-book"></i>
                                        <span>24 lessons</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Regular Courses -->
                    <div class="course-card" data-id="2">
                        <img src="https://images.unsplash.com/photo-1543163521-1bf539c55dd2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="Fiqh" class="course-image">
                        <div class="course-content">
                            <span class="course-category fiqh">Fiqh</span>
                            <h3 class="course-title">Fiqh of Purification & Prayer</h3>
                            <div class="course-description">Learn the detailed rulings of Taharah (purification) and Salah (prayer) according to the Hanafi school with practical demonstrations.</div>
                            <div class="course-meta">
                                <div class="course-instructor">
                                    <i class="fas fa-user-tie"></i>
                                    <span>Sh. Yasir Qadhi</span>
                                </div>
                                <div class="course-stats">
                                    <div class="stat-item">
                                        <i class="far fa-clock"></i>
                                        <span>18 hours</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="fas fa-book"></i>
                                        <span>30 lessons</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="course-card" data-id="3">
                        <img src="https://images.unsplash.com/photo-1512790182412-b19e6d62bc39?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="Aqeedah" class="course-image">
                        <div class="course-content">
                            <span class="course-category aqeedah">Aqeedah</span>
                            <h3 class="course-title">Islamic Creed (Aqeedah) for Beginners</h3>
                            <div class="course-description">Foundational beliefs of Islam based on the Quran and authentic Sunnah, covering the six articles of faith and their implications.</div>
                            <div class="progress-indicator enrolled">
                                <div class="progress-label">
                                    <span>Progress</span>
                                    <span>75%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 75%"></div>
                                </div>
                            </div>
                            <div class="course-meta">
                                <div class="course-instructor">
                                    <i class="fas fa-user-tie"></i>
                                    <span>Dr. Bilal Philips</span>
                                </div>
                                <div class="course-stats">
                                    <div class="stat-item">
                                        <i class="far fa-clock"></i>
                                        <span>15 hours</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="fas fa-book"></i>
                                        <span>20 lessons</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="course-card" data-id="4">
                        <img src="https://images.unsplash.com/photo-1562774053-701939374585?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="Arabic" class="course-image">
                        <div class="course-content">
                            <span class="course-category arabic">Arabic</span>
                            <h3 class="course-title">Modern Standard Arabic: Level 1</h3>
                            <div class="course-description">Beginner's course to read, write and speak Modern Standard Arabic with focus on Quranic vocabulary and Islamic terminology.</div>
                            <div class="progress-indicator enrolled">
                                <div class="progress-label">
                                    <span>Progress</span>
                                    <span>40%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 40%"></div>
                                </div>
                            </div>
                            <div class="course-meta">
                                <div class="course-instructor">
                                    <i class="fas fa-user-tie"></i>
                                    <span>Ustadh Nouman Ali Khan</span>
                                </div>
                                <div class="course-stats">
                                    <div class="stat-item">
                                        <i class="far fa-clock"></i>
                                        <span>30 hours</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="fas fa-book"></i>
                                        <span>40 lessons</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="course-card" data-id="5">
                        <img src="https://images.unsplash.com/photo-1544364631-99bbd8e23f08?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="Seerah" class="course-image">
                        <div class="course-content">
                            <span class="course-category seerah">Seerah</span>
                            <h3 class="course-title">Seerah: Life of Prophet Muhammad (PBUH)</h3>
                            <div class="course-description">Detailed biography of the Prophet from authentic sources with lessons for contemporary life. Covering from birth to the Farewell Pilgrimage.</div>
                            <div class="course-meta">
                                <div class="course-instructor">
                                    <i class="fas fa-user-tie"></i>
                                    <span>Dr. Tariq Ramadan</span>
                                </div>
                                <div class="course-stats">
                                    <div class="stat-item">
                                        <i class="far fa-clock"></i>
                                        <span>20 hours</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="fas fa-book"></i>
                                        <span>35 lessons</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="course-card" data-id="6">
                        <img src="https://images.unsplash.com/photo-1542744095-fcf48d80b0fd?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="Fiqh" class="course-image">
                        <div class="course-content">
                            <span class="course-category fiqh">Fiqh</span>
                            <h3 class="course-title">Fiqh of Fasting & Zakat</h3>
                            <div class="course-description">Detailed rulings of Sawm (fasting) and Zakat (obligatory charity) with contemporary applications and case studies.</div>
                            <div class="course-meta">
                                <div class="course-instructor">
                                    <i class="fas fa-user-tie"></i>
                                    <span>Sh. Muhammad Al-Munajjid</span>
                                </div>
                                <div class="course-stats">
                                    <div class="stat-item">
                                        <i class="far fa-clock"></i>
                                        <span>14 hours</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="fas fa-book"></i>
                                        <span>22 lessons</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="course-card" data-id="7">
                        <img src="https://images.unsplash.com/photo-1512790182412-b19e6d62bc39?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="Arabic Grammar" class="course-image">
                        <div class="course-content">
                            <span class="course-category arabic">Arabic</span>
                            <h3 class="course-title">Quranic Arabic Grammar</h3>
                            <div class="course-description">Learn Arabic grammar through Quranic examples to understand the Quran directly without translation.</div>
                            <div class="course-meta">
                                <div class="course-instructor">
                                    <i class="fas fa-user-tie"></i>
                                    <span>Dr. Mustafa Khattab</span>
                                </div>
                                <div class="course-stats">
                                    <div class="stat-item">
                                        <i class="far fa-clock"></i>
                                        <span>25 hours</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="fas fa-book"></i>
                                        <span>36 lessons</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="course-card" data-id="8">
                        <img src="https://images.unsplash.com/photo-1543163521-1bf539c55dd2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="Tafsir" class="course-image">
                        <div class="course-content">
                            <span class="course-category tafsir">Tafsir</span>
                            <h3 class="course-title">Tafsir of Juz Amma (Last Part)</h3>
                            <div class="course-description">Explanation of the 30th part of the Quran containing short surahs commonly recited in prayers.</div>
                            <div class="course-meta">
                                <div class="course-instructor">
                                    <i class="fas fa-user-tie"></i>
                                    <span>Sh. Abdulrahman Al-Sudais</span>
                                </div>
                                <div class="course-stats">
                                    <div class="stat-item">
                                        <i class="far fa-clock"></i>
                                        <span>10 hours</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="fas fa-book"></i>
                                        <span>15 lessons</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Info Box -->
                <div class="info-box">
                    <div class="info-title">
                        <i class="fas fa-info-circle"></i>
                        <span>About Our Courses</span>
                    </div>
                    <div class="info-text">
                        All courses are taught by qualified Islamic scholars and include video lessons, downloadable materials, quizzes, and certificates of completion. Course content is based on authentic Islamic sources and follows traditional methodologies.
                    </div>
                </div>
            </div>

            <!-- Course Details Modal -->
            <div class="course-modal" id="courseModal">
                <div class="modal-content">
                    <div class="modal-header" id="modalHeader">
                        <button class="close-modal" id="closeModal">
                            <i class="fas fa-times"></i>
                        </button>
                        <div class="modal-category" id="modalCategory"></div>
                        <div class="modal-title" id="modalTitle"></div>
                    </div>
                    <div class="modal-body">
                        <div class="description-section">
                            <div class="section-label">
                                <i class="fas fa-align-left"></i>
                                <span>Description</span>
                            </div>
                            <div class="description-text" id="modalDescription"></div>
                        </div>
                        
                        <div class="details-section">
                            <div class="detail-box">
                                <i class="fas fa-chalkboard-teacher"></i>
                                <div class="detail-label">Instructor</div>
                                <div class="detail-value" id="modalInstructor"></div>
                            </div>
                            <div class="detail-box">
                                <i class="fas fa-clock"></i>
                                <div class="detail-label">Duration</div>
                                <div class="detail-value" id="modalDuration"></div>
                            </div>
                            <div class="detail-box">
                                <i class="fas fa-book"></i>
                                <div class="detail-label">Lessons</div>
                                <div class="detail-value" id="modalLessons"></div>
                            </div>
                            <div class="detail-box">
                                <i class="fas fa-chart-line"></i>
                                <div class="detail-label">Level</div>
                                <div class="detail-value" id="modalLevel"></div>
                            </div>
                        </div>
                        
                        <div class="progress-section" id="progressSection" style="display: none;">
                            <div class="section-label">
                                <i class="fas fa-tasks"></i>
                                <span>Your Progress</span>
                            </div>
                            <div class="progress-label" id="modalProgressLabel">
                                <span>Progress</span>
                                <span>0%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="modalProgressFill" style="width: 0%"></div>
                            </div>
                        </div>
                        
                        <div class="certificate-section">
                            <div class="section-label">
                                <i class="fas fa-certificate"></i>
                                <span>Certificate</span>
                            </div>
                            <div class="certificate-text" id="modalCertificateText"></div>
                        </div>
                        
                        <div class="modal-actions" id="modalActions">
                            <!-- Action buttons will be dynamically inserted here -->
                        </div>
                    </div>
                </div>
            </div>

            
        </div>
    </div>

    <script>
        // ============================================
        // PAGE TRANSITION LOADER IMPLEMENTATION
        // ============================================

        // DOM Elements
        const pageLoader = document.getElementById('pageLoader');
        const pageContent = document.getElementById('pageContent');

        // Function to show page loader
        function showPageLoader() {
            pageLoader.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Function to hide page loader
        function hidePageLoader() {
            pageLoader.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Function to check if two URLs are the same page
        function isSamePage(href, currentUrl) {
            // Get current page path without domain
            const currentPath = window.location.pathname;
            const currentHash = window.location.hash;
            
            // Handle different href formats
            if (href === '' || href === '#' || href === './' || href === '/') {
                // Home page links
                return currentPath.endsWith('/') || 
                       currentPath.endsWith('index.html') || 
                       currentPath === '/';
            }
            
            // Remove query strings and hashes for comparison
            const cleanHref = href.split('?')[0].split('#')[0];
            const cleanCurrentPath = currentPath.split('?')[0].split('#')[0];
            
            // Normalize paths
            const normalizePath = (path) => {
                // Remove leading/trailing slashes and index.html
                path = path.replace(/^\/|\/$/g, '');
                path = path.replace(/index\.html$/i, '');
                return path;
            };
            
            const normalizedHref = normalizePath(cleanHref);
            const normalizedCurrent = normalizePath(cleanCurrentPath);
            
            // Compare normalized paths
            return normalizedHref === normalizedCurrent;
        }

        // Intercept all link clicks for smooth page transitions
        document.addEventListener('click', function(e) {
            // Find the closest anchor element
            const anchor = e.target.closest('a');
            
            if (!anchor) return;
            
            const href = anchor.getAttribute('href');
            
            // Skip if no href, mailto, tel, javascript, or external links
            if (!href || 
                href.startsWith('javascript:') || 
                href.startsWith('mailto:') || 
                href.startsWith('tel:') ||
                href.startsWith('#') ||
                anchor.getAttribute('target') === '_blank') {
                return;
            }
            
            // Skip if it's an external link (starts with http and not same origin)
            if (href.startsWith('http') && !href.includes(window.location.origin)) {
                return;
            }
            
            // Check if we're clicking on the current page
            if (isSamePage(href, window.location.href)) {
                // Don't show loader for same page
                // Just update active state if it's a nav item
                if (anchor.classList.contains('nav-item')) {
                    // Update active nav item
                    document.querySelectorAll('.nav-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    anchor.classList.add('active');
                }
                return;
            }
            
            // Prevent default navigation
            e.preventDefault();
            
            // Show page loader
            showPageLoader();
            
            // Fade out current content
            if (pageContent) {
                pageContent.style.opacity = '0';
                pageContent.style.transition = 'opacity 0.3s ease';
            }
            
            // Navigate after 1 second delay to allow loader to show properly
            setTimeout(() => {
                window.location.href = href;
            }, 1000);
        });

        // Hide loader when page is fully loaded
        window.addEventListener('load', function() {
            // Wait 100ms before hiding loader (smooth transition)
            setTimeout(hidePageLoader, 100);
            
            // Ensure content is visible
            if (pageContent) {
                pageContent.style.opacity = '1';
            }
            
            // Set active nav item based on current page
            const currentPath = window.location.pathname;
            
            // Reset all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Check which page we're on and set active nav item
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                const href = item.getAttribute('href');
                if (isSamePage(href, window.location.href)) {
                    item.classList.add('active');
                }
            });
            
            // Special case: if we're on courses page (inside learning)
            if (currentPath.includes('courses')) {
                document.querySelector('.nav-item[href="index.html"]').classList.add('active');
            }
        });

        // Also hide loader if page finishes loading after our transition
        window.addEventListener('pageshow', function(event) {
            if (event.persisted) {
                hidePageLoader();
                if (pageContent) {
                    pageContent.style.opacity = '1';
                }
            }
        });

        // Handle browser back/forward buttons
        window.addEventListener('popstate', function() {
            showPageLoader();
        });

        // Initial hide of loader (in case page loads fast)
        setTimeout(() => {
            if (document.readyState === 'complete') {
                hidePageLoader();
            }
        }, 100);

        // ============================================
        // ISLAMIC COURSES PAGE FUNCTIONALITY
        // ============================================

        // Course Data
        const islamicCourses = [
            { 
                id: 1,
                title: "Quran Tafsir: Surah Al-Fatiha & Al-Baqarah", 
                category: "tafsir", 
                description: "In-depth explanation of the first two chapters of the Quran with classical and contemporary commentaries from Ibn Kathir, Al-Qurtubi, and As-Sa'di. This course covers linguistic analysis, historical context, and practical applications of verses.",
                instructor: "Dr. Omar Suleiman",
                duration: "12 hours", 
                lessons: 24,
                progress: 0,
                enrolled: false,
                hasCertificate: true,
                level: "Intermediate",
                image: "https://images.unsplash.com/photo-1544717305-2782549b5136?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            { 
                id: 2,
                title: "Fiqh of Purification & Prayer", 
                category: "fiqh", 
                description: "Learn the detailed rulings of Taharah (purification) and Salah (prayer) according to the Hanafi school with practical demonstrations. Includes wudu, ghusl, tayammum, and complete prayer with sunnah acts.",
                instructor: "Sh. Yasir Qadhi",
                duration: "18 hours", 
                lessons: 30,
                progress: 0,
                enrolled: false,
                hasCertificate: true,
                level: "Beginner",
                image: "https://images.unsplash.com/photo-1543163521-1bf539c55dd2?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            { 
                id: 3,
                title: "Islamic Creed (Aqeedah) for Beginners", 
                category: "aqeedah", 
                description: "Foundational beliefs of Islam based on the Quran and authentic Sunnah, covering the six articles of faith and their implications. Essential for every Muslim to strengthen their belief system.",
                instructor: "Dr. Bilal Philips",
                duration: "15 hours", 
                lessons: 20,
                progress: 75,
                enrolled: true,
                hasCertificate: true,
                level: "Beginner",
                image: "https://images.unsplash.com/photo-1512790182412-b19e6d62bc39?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            { 
                id: 4,
                title: "Modern Standard Arabic: Level 1", 
                category: "arabic", 
                description: "Beginner's course to read, write and speak Modern Standard Arabic with focus on Quranic vocabulary and Islamic terminology. Perfect for those wanting to understand the Quran in its original language.",
                instructor: "Ustadh Nouman Ali Khan",
                duration: "30 hours", 
                lessons: 40,
                progress: 40,
                enrolled: true,
                hasCertificate: true,
                level: "Beginner",
                image: "https://images.unsplash.com/photo-1562774053-701939374585?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            { 
                id: 5,
                title: "Seerah: Life of Prophet Muhammad (PBUH)", 
                category: "seerah", 
                description: "Detailed biography of the Prophet from authentic sources with lessons for contemporary life. Covering from birth to the Farewell Pilgrimage with historical context and moral lessons.",
                instructor: "Dr. Tariq Ramadan",
                duration: "20 hours", 
                lessons: 35,
                progress: 0,
                enrolled: false,
                hasCertificate: true,
                level: "All Levels",
                image: "https://images.unsplash.com/photo-1544364631-99bbd8e23f08?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            { 
                id: 6,
                title: "Fiqh of Fasting & Zakat", 
                category: "fiqh", 
                description: "Detailed rulings of Sawm (fasting) and Zakat (obligatory charity) with contemporary applications and case studies. Covers Ramadan, voluntary fasts, and zakat calculations.",
                instructor: "Sh. Muhammad Al-Munajjid",
                duration: "14 hours", 
                lessons: 22,
                progress: 0,
                enrolled: false,
                hasCertificate: true,
                level: "Intermediate",
                image: "https://images.unsplash.com/photo-1542744095-fcf48d80b0fd?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            { 
                id: 7,
                title: "Quranic Arabic Grammar", 
                category: "arabic", 
                description: "Learn Arabic grammar through Quranic examples to understand the Quran directly without translation. Focus on i'rab (grammatical analysis) and balaghah (rhetoric).",
                instructor: "Dr. Mustafa Khattab",
                duration: "25 hours", 
                lessons: 36,
                progress: 0,
                enrolled: false,
                hasCertificate: true,
                level: "Intermediate",
                image: "https://images.unsplash.com/photo-1512790182412-b19e6d62bc39?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            { 
                id: 8,
                title: "Tafsir of Juz Amma (Last Part)", 
                category: "tafsir", 
                description: "Explanation of the 30th part of the Quran containing short surahs commonly recited in prayers. Perfect for daily reflection and understanding frequently recited chapters.",
                instructor: "Sh. Abdulrahman Al-Sudais",
                duration: "10 hours", 
                lessons: 15,
                progress: 0,
                enrolled: false,
                hasCertificate: true,
                level: "All Levels",
                image: "https://images.unsplash.com/photo-1543163521-1bf539c55dd2?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            { 
                id: 9,
                title: "Aqeedah Tahawiyyah Explained", 
                category: "aqeedah", 
                description: "Detailed explanation of the classical text on Islamic creed by Imam Abu Ja'far al-Tahawi. Covers core beliefs and refutations of deviant sects.",
                instructor: "Dr. Mufti Ismail Menk",
                duration: "25 hours", 
                lessons: 30,
                progress: 0,
                enrolled: false,
                hasCertificate: true,
                level: "Advanced",
                image: "https://images.unsplash.com/photo-1544717305-2782549b5136?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            { 
                id: 10,
                title: "The Companions of the Prophet", 
                category: "seerah", 
                description: "Biographies of the major companions of Prophet Muhammad (PBUH) and their contributions to Islam. Learn from the lives of the Sahaba and their exemplary character.",
                instructor: "Dr. Yasir Qadhi",
                duration: "18 hours", 
                lessons: 28,
                progress: 0,
                enrolled: false,
                hasCertificate: true,
                level: "All Levels",
                image: "https://images.unsplash.com/photo-1544364631-99bbd8e23f08?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            }
        ];

        // Application State
        const state = {
            currentCategory: 'all',
            searchQuery: '',
            enrolledCourses: [3, 4], // IDs of enrolled courses
            completedCourses: [], // IDs of completed courses
            sortBy: 'recent'
        };

        // DOM Elements
        const backBtn = document.getElementById('backBtn');
        const categoryBtns = document.querySelectorAll('.category-btn');
        const searchInput = document.getElementById('searchInput');
        const sortSelect = document.getElementById('sortSelect');
        const coursesGrid = document.getElementById('coursesGrid');
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        const courseModal = document.getElementById('courseModal');
        const closeModalBtn = document.getElementById('closeModal');

        // Theme toggle functionality
        themeToggle.addEventListener('click', function() {
            const isDarkMode = body.classList.contains('dark-theme');
            
            if (isDarkMode) {
                body.classList.remove('dark-theme');
                body.classList.add('light-theme');
                this.innerHTML = '<i class="fas fa-moon"></i><span>Dark</span>';
            } else {
                body.classList.remove('light-theme');
                body.classList.add('dark-theme');
                this.innerHTML = '<i class="fas fa-sun"></i><span>Light</span>';
            }
            
            // Save theme preference to localStorage
            localStorage.setItem('isDarkMode', !isDarkMode);
        });
        
        // Check for saved theme preference
        const savedTheme = localStorage.getItem('isDarkMode');
        if (savedTheme === 'true') {
            body.classList.remove('light-theme');
            body.classList.add('dark-theme');
            themeToggle.innerHTML = '<i class="fas fa-sun"></i><span>Light</span>';
        } else {
            body.classList.remove('dark-theme');
            body.classList.add('light-theme');
            themeToggle.innerHTML = '<i class="fas fa-moon"></i><span>Dark</span>';
        }

        // Back button functionality
        backBtn.addEventListener('click', function() {
            showPageLoader();
            setTimeout(() => {
                window.history.back();
            }, 300);
        });

        // Render Courses Grid
        function renderCoursesGrid() {
            // Filter courses based on current category, search, and sort
            let filteredCourses = islamicCourses.filter(course => {
                // Category filtering
                if (state.currentCategory === 'enrolled' && !state.enrolledCourses.includes(course.id)) return false;
                if (state.currentCategory !== 'all' && state.currentCategory !== 'enrolled' && course.category !== state.currentCategory) return false;
                
                // Search filtering
                if (state.searchQuery) {
                    const query = state.searchQuery.toLowerCase();
                    return (
                        course.title.toLowerCase().includes(query) ||
                        course.description.toLowerCase().includes(query) ||
                        course.instructor.toLowerCase().includes(query) ||
                        course.category.toLowerCase().includes(query) ||
                        course.level.toLowerCase().includes(query)
                    );
                }
                
                return true;
            });

            // Sort courses
            filteredCourses.sort((a, b) => {
                if (state.sortBy === 'recent') {
                    // Sort by ID (simulating recency)
                    return b.id - a.id;
                } else if (state.sortBy === 'popular') {
                    // Sort by lessons (simulating popularity)
                    return b.lessons - a.lessons;
                } else if (state.sortBy === 'duration') {
                    // Sort by duration
                    const aHours = parseInt(a.duration);
                    const bHours = parseInt(b.duration);
                    return bHours - aHours;
                } else if (state.sortBy === 'enrolled') {
                    // Sort by enrollment status
                    const aEnrolled = state.enrolledCourses.includes(a.id);
                    const bEnrolled = state.enrolledCourses.includes(b.id);
                    if (aEnrolled && !bEnrolled) return -1;
                    if (!aEnrolled && bEnrolled) return 1;
                    return 0;
                }
                return 0;
            });

            // Clear current grid
            coursesGrid.innerHTML = '';

            if (filteredCourses.length === 0) {
                // Show empty state
                coursesGrid.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-book-open"></i>
                        <h3>No Courses Found</h3>
                        <p>${state.searchQuery ? `No results for "${state.searchQuery}"` : 'No courses match your current filter'}</p>
                    </div>
                `;
                return;
            }

            // Render course cards
            filteredCourses.forEach((course, index) => {
                const isEnrolled = state.enrolledCourses.includes(course.id);
                const isCompleted = state.completedCourses.includes(course.id);
                const isFeatured = course.id === 1; // First course is featured
                
                const courseElement = document.createElement('div');
                courseElement.className = `course-card ${isFeatured ? 'featured-course' : ''}`;
                courseElement.setAttribute('data-id', course.id);
                
                // Determine enrollment status text
                let enrollmentStatus = '';
                if (isEnrolled) {
                    enrollmentStatus = isCompleted ? 'Completed' : 'Enrolled';
                }
                
                courseElement.innerHTML = `
                    <img src="${course.image}" alt="${course.title}" class="course-image">
                    <div class="course-content">
                        <span class="course-category ${course.category}">${course.category.charAt(0).toUpperCase() + course.category.slice(1)}</span>
                        <h3 class="course-title">${course.title}</h3>
                        <div class="course-description">${course.description}</div>
                        ${isEnrolled && course.progress > 0 ? `
                            <div class="progress-indicator enrolled">
                                <div class="progress-label">
                                    <span>Progress</span>
                                    <span>${course.progress}%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${course.progress}%"></div>
                                </div>
                            </div>
                        ` : ''}
                        <div class="course-meta">
                            <div class="course-instructor">
                                <i class="fas fa-user-tie"></i>
                                <span>${course.instructor}</span>
                            </div>
                            <div class="course-stats">
                                <div class="stat-item">
                                    <i class="far fa-clock"></i>
                                    <span>${course.duration}</span>
                                </div>
                                <div class="stat-item">
                                    <i class="fas fa-book"></i>
                                    <span>${course.lessons} lessons</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                coursesGrid.appendChild(courseElement);
            });

            // Reattach event listeners
            attachCourseEventListeners();
        }

        // Attach event listeners to course cards
        function attachCourseEventListeners() {
            // Course card click
            document.querySelectorAll('.course-card').forEach(card => {
                card.addEventListener('click', function() {
                    const courseId = parseInt(this.getAttribute('data-id'));
                    showCourseDetails(courseId);
                });
            });
        }

        // Show Course Details Modal
        function showCourseDetails(courseId) {
            const course = islamicCourses.find(c => c.id === courseId);
            if (!course) return;
            
            const isEnrolled = state.enrolledCourses.includes(courseId);
            const isCompleted = state.completedCourses.includes(courseId);
            
            // Update modal header class based on course category
            const modalHeader = document.getElementById('modalHeader');
            modalHeader.className = `modal-header ${course.category}`;
            
            // Update modal content
            document.getElementById('modalTitle').textContent = course.title;
            document.getElementById('modalCategory').textContent = course.category.charAt(0).toUpperCase() + course.category.slice(1);
            document.getElementById('modalDescription').textContent = course.description;
            document.getElementById('modalInstructor').textContent = course.instructor;
            document.getElementById('modalDuration').textContent = course.duration;
            document.getElementById('modalLessons').textContent = `${course.lessons} lessons`;
            document.getElementById('modalLevel').textContent = course.level;
            
            // Update progress section
            const progressSection = document.getElementById('progressSection');
            const progressLabel = document.getElementById('modalProgressLabel');
            const progressFill = document.getElementById('modalProgressFill');
            
            if (isEnrolled) {
                progressSection.style.display = 'block';
                progressLabel.innerHTML = `<span>Progress</span><span>${course.progress}%</span>`;
                progressFill.style.width = `${course.progress}%`;
            } else {
                progressSection.style.display = 'none';
            }
            
            // Update certificate text
            const certText = document.getElementById('modalCertificateText');
            if (isCompleted) {
                certText.innerHTML = `<strong>Certificate Status:</strong> Ready for download! Complete all lessons and quizzes to receive your certificate.`;
            } else if (isEnrolled) {
                certText.innerHTML = `<strong>Certificate Status:</strong> Available upon completion (${course.progress}% progress). Complete all lessons and quizzes to receive your certificate.`;
            } else {
                certText.innerHTML = `<strong>Certificate Status:</strong> Available upon enrollment and completion. Complete all lessons and quizzes to receive your certificate.`;
            }
            
            // Create appropriate action buttons
            const modalActions = document.getElementById('modalActions');
            modalActions.innerHTML = '';
            
            if (!isEnrolled) {
                // Enroll button
                const enrollBtn = document.createElement('button');
                enrollBtn.className = 'action-btn primary';
                enrollBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> Enroll Now';
                enrollBtn.addEventListener('click', () => {
                    enrollInCourse(courseId);
                });
                modalActions.appendChild(enrollBtn);
            } else if (isCompleted) {
                // View certificate button
                const certBtn = document.createElement('button');
                certBtn.className = 'action-btn primary';
                certBtn.innerHTML = '<i class="fas fa-certificate"></i> View Certificate';
                certBtn.addEventListener('click', () => {
                    alert(`Opening certificate for: ${course.title}`);
                    closeModal();
                });
                modalActions.appendChild(certBtn);
                
                // Continue learning button
                const learnBtn = document.createElement('button');
                learnBtn.className = 'action-btn secondary';
                learnBtn.innerHTML = '<i class="fas fa-play"></i> Review Course';
                learnBtn.addEventListener('click', () => {
                    alert(`Opening course review for: ${course.title}`);
                    closeModal();
                });
                modalActions.appendChild(learnBtn);
            } else {
                // Continue learning button
                const learnBtn = document.createElement('button');
                learnBtn.className = 'action-btn primary';
                learnBtn.innerHTML = course.progress > 0 ? 
                    '<i class="fas fa-play"></i> Continue Learning' : 
                    '<i class="fas fa-play"></i> Start Learning';
                learnBtn.addEventListener('click', () => {
                    alert(`Opening course player for: ${course.title}`);
                    closeModal();
                });
                modalActions.appendChild(learnBtn);
            }
            
            // Save button
            const saveBtn = document.createElement('button');
            saveBtn.className = 'action-btn secondary';
            saveBtn.innerHTML = '<i class="far fa-bookmark"></i> Save';
            saveBtn.addEventListener('click', () => {
                saveCourse(courseId);
                saveBtn.innerHTML = '<i class="fas fa-bookmark"></i> Saved!';
                setTimeout(() => {
                    saveBtn.innerHTML = '<i class="far fa-bookmark"></i> Save';
                }, 2000);
            });
            modalActions.appendChild(saveBtn);
            
            // Close button
            const closeBtn = document.createElement('button');
            closeBtn.className = 'action-btn secondary';
            closeBtn.innerHTML = '<i class="fas fa-times"></i> Close';
            closeBtn.addEventListener('click', closeModal);
            modalActions.appendChild(closeBtn);
            
            // Show modal
            openModal();
        }

        // Enroll in Course
        function enrollInCourse(courseId) {
            if (!state.enrolledCourses.includes(courseId)) {
                state.enrolledCourses.push(courseId);
                renderCoursesGrid();
                
                // Show success message
                const course = islamicCourses.find(c => c.id === courseId);
                alert(` Successfully enrolled in "${course.title}"! You can now access all course materials.`);
                
                // Close modal
                closeModal();
            }
        }

        // Save Course
        function saveCourse(courseId) {
            let savedCourses = JSON.parse(localStorage.getItem('savedCourses') || '[]');
            if (!savedCourses.includes(courseId)) {
                savedCourses.push(courseId);
                localStorage.setItem('savedCourses', JSON.stringify(savedCourses));
            }
        }

        // Open Modal
        function openModal() {
            const modal = document.getElementById('courseModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Close Modal
        function closeModal() {
            const modal = document.getElementById('courseModal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Close modal with escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const modal = document.getElementById('courseModal');
                if (modal.classList.contains('active')) {
                    closeModal();
                }
            }
        });

        // Close modal button
        closeModalBtn.addEventListener('click', closeModal);

        // Close modal when clicking outside content
        courseModal.addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Category filter
        categoryBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                // Update active button
                categoryBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                // Update current category
                state.currentCategory = this.getAttribute('data-category');
                
                // Update sort select if "My Courses" is selected
                if (state.currentCategory === 'enrolled') {
                    sortSelect.value = 'enrolled';
                    state.sortBy = 'enrolled';
                }
                
                // Filter courses
                renderCoursesGrid();
            });
        });

        // Search functionality
        let searchTimeout;
        searchInput.addEventListener('input', function() {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                state.searchQuery = this.value.toLowerCase();
                renderCoursesGrid();
            }, 300);
        });

        // Sort functionality
        sortSelect.addEventListener('change', function() {
            state.sortBy = this.value;
            
            // If "My Courses" is selected in sort, update category filter
            if (state.sortBy === 'enrolled') {
                categoryBtns.forEach(b => b.classList.remove('active'));
                document.querySelector('.category-btn[data-category="all"]').classList.add('active');
                state.currentCategory = 'all';
            }
            
            renderCoursesGrid();
        });

        // Add loading animation to nav items when clicked
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function(e) {
                // Check if this is a navigation to a different page
                const href = this.getAttribute('href');
                if (!href || href.startsWith('#') || isSamePage(href, window.location.href)) {
                    return;
                }
                
                // Add loading class
                this.classList.add('loading');
                
                // Remove loading class after navigation
                setTimeout(() => {
                    this.classList.remove('loading');
                }, 1500);
            });
        });

        // Initial render
        setTimeout(() => {
            renderCoursesGrid();
            
            // Animate course cards on load
            setTimeout(() => {
                const courseCards = document.querySelectorAll('.course-card');
                courseCards.forEach((card, index) => {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    
                    setTimeout(() => {
                        card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, 100 + (index * 100));
                });
                
                // Add hover effect to images
                courseCards.forEach(card => {
                    const image = card.querySelector('.course-image');
                    if (image) {
                        card.addEventListener('mouseenter', function() {
                            image.style.transform = 'scale(1.05)';
                            image.style.transition = 'transform 0.5s ease';
                        });
                        
                        card.addEventListener('mouseleave', function() {
                            image.style.transform = 'scale(1)';
                        });
                    }
                });
            }, 300);
        }, 500);
    </script>
</body>
</html>